# Next Session: Environment Setup & Validation

## Missing Components to Install

### 1. Java JDK 17+ (Required)
Android Gradle Plugin 8.x requires JDK 17 or higher.

```bash
# Option A: Install via Homebrew
brew install openjdk@17

# After install, add to shell profile (~/.zshrc or ~/.bash_profile):
export JAVA_HOME=$(/usr/libexec/java_home -v 17)
export PATH="$JAVA_HOME/bin:$PATH"

# Option B: Install via SDKMAN
curl -s "https://get.sdkman.io" | bash
sdk install java 17.0.9-tem
```

### 2. Android SDK (Required)
Need Android SDK with API 35 (compileSdk) and build tools.

```bash
# Option A: Install Android Studio (Recommended)
# Download from: https://developer.android.com/studio
# Android Studio includes SDK Manager and handles SDK installation

# Option B: Command-line tools only
# Download from: https://developer.android.com/studio#command-line-tools-only
mkdir -p ~/Library/Android/sdk/cmdline-tools
# Extract to ~/Library/Android/sdk/cmdline-tools/latest/

# Then install required components:
sdkmanager "platforms;android-35" "build-tools;35.0.0" "platform-tools"
```

### 3. Environment Variables
Add to `~/.zshrc` or `~/.bash_profile`:

```bash
export ANDROID_HOME=$HOME/Library/Android/sdk
export PATH=$PATH:$ANDROID_HOME/emulator
export PATH=$PATH:$ANDROID_HOME/platform-tools
export PATH=$PATH:$ANDROID_HOME/cmdline-tools/latest/bin
```

### 4. local.properties File
Create `local.properties` in project root (auto-generated by Android Studio, or create manually):

```properties
sdk.dir=/Users/josephfajen/Library/Android/sdk
```

## Validation Commands to Run

Once environment is set up, run these commands:

```bash
# 1. Verify Java
java -version
# Expected: openjdk version "17.x.x" or higher

# 2. Verify Android SDK
echo $ANDROID_HOME
# Expected: /Users/josephfajen/Library/Android/sdk

# 3. Build the project
cd /Users/josephfajen/git/timer
./gradlew build

# 4. Run unit tests
./gradlew test

# 5. Run specific test classes
./gradlew test --tests "com.igygtimer.util.TimeUtilsTest"
./gradlew test --tests "com.igygtimer.viewmodel.TimerViewModelTest"

# 6. Check for lint issues
./gradlew lint

# 7. Install on connected device/emulator
./gradlew installDebug
```

## Items Not Yet Validated

| Item | Validation Method |
|------|-------------------|
| Project compiles | `./gradlew build` |
| Unit tests pass | `./gradlew test` |
| App runs on device | `./gradlew installDebug` + manual test |
| Timer accuracy | Manual test: 5 rounds, verify timing |
| State transitions | Manual test: Work → Rest → Work flow |
| Pause/Resume | Manual test during workout |
| Stop confirmation | Manual test: tap Stop, verify dialog |
| Screen stays on | Manual test: verify no screen timeout |

## Potential Issues to Watch For

1. **Gradle sync failures** - Usually SDK/JDK path issues
2. **Compose compiler version mismatch** - May need to update `libs.versions.toml`
3. **Missing SDK components** - Install via SDK Manager
4. **Emulator not available** - Create AVD via Android Studio or `avdmanager`

## Quick Start for Next Session

```bash
# 1. Install prerequisites (if not done)
brew install openjdk@17
# Install Android Studio from website

# 2. Set up environment
source ~/.zshrc  # reload shell config

# 3. Create local.properties
echo "sdk.dir=$ANDROID_HOME" > /Users/josephfajen/git/timer/local.properties

# 4. Build and test
cd /Users/josephfajen/git/timer
./gradlew build
./gradlew test

# 5. Run on device
./gradlew installDebug
```

## Phase 1 Acceptance Criteria to Verify

- [ ] All unit tests pass (`./gradlew test`)
- [ ] App builds without errors (`./gradlew build`)
- [ ] App launches on device/emulator
- [ ] Home screen: ratio selection + round count works
- [ ] Timer starts in WORK phase, counts UP
- [ ] Tapping during WORK → REST with correct duration (work × ratio)
- [ ] REST counts DOWN and auto-transitions to next WORK
- [ ] Final REST → COMPLETE screen
- [ ] Pause/Resume works from WORK and REST phases
- [ ] Stop shows confirmation dialog, returns to Home
- [ ] Screen stays on during timer
